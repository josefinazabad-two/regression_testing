version: 2


macros:
  - name: warehouse_post_hook
    description: | 
      Deprecated: This macro will be decommissioned as it is being replaced by other more standard testing.

      Runs 5 standard tests on tables in the warehouse schema.
      SKEY name must match spec SKEY_<tablename>
      
      1. Test that SKEY for the table exists.
      2. Test that SKEY for the table is NOT NULL.
      3. Test that SKEY for the table is unique.
      4. Test that dimensions have an unknown row.
      5. Test that foreign keys on FACT tables are not null (warning).

      All of these test are considered as necessary and must be met to consider a model designed.

      For future development, if dbt extended to allow tests to be associated with models from dbt_project.yml
      then these could be moved to be tests rather than done as a post hook - this is more in line with
      the intention of this code. refer [Jira BRM-383](https://healthalliancelabs.atlassian.net/browse/BRM-383)
